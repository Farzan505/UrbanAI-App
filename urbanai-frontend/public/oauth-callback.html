<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>OAuth Callback</title>
    <script>
      function loadHandler() {
        if (opener) {
          if (location.hash) {
            // Send OAuth response hash to parent window
            if (typeof opener.require === "function" && opener.require("esri/kernel")) {
              opener.require("esri/kernel").id.setOAuthResponseHash(location.hash);
            } else {
              opener.dispatchEvent(new CustomEvent("arcgis:auth:hash", { detail: location.hash }));
            }
            close();
          } else if (location.search) {
            // Send OAuth response search params to parent window
            opener.dispatchEvent(new CustomEvent("arcgis:auth:location:search", { detail: location.search }));
            close();
          }
        } else {
          // If no opener, just close the window
          close(); 
        }
      }
    </script>
  </head>
  <body onload="loadHandler();">
    <div style="text-align: center; padding: 20px; font-family: Arial, sans-serif;">
      <h3>Processing authentication...</h3>
      <p>This window will close automatically.</p>
    </div>
  </body>
</html>
